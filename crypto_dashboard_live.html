<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SuperClaude Crypto Analysis Suite - Live</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f0f23);
            color: #ffffff;
            overflow-x: hidden;
        }

        .dashboard-header {
            background: linear-gradient(90deg, #1e3c72, #2a5298);
            padding: 2rem;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            border-bottom: 3px solid #4fc3f7;
        }

        .dashboard-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .dashboard-header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            color: #b3e5fc;
        }

        .live-indicator {
            display: inline-flex;
            align-items: center;
            background: rgba(76, 175, 80, 0.2);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            margin-left: 1rem;
            border: 1px solid #4caf50;
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: #4caf50;
            border-radius: 50%;
            margin-right: 0.5rem;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .roles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .role-card {
            background: linear-gradient(145deg, #2d2d44, #1a1a2e);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            border: 1px solid rgba(79, 195, 247, 0.3);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .role-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(79, 195, 247, 0.2);
            border-color: #4fc3f7;
        }

        .role-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #4fc3f7, #29b6f6, #03a9f4);
        }

        .role-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .role-icon {
            font-size: 2rem;
            color: #4fc3f7;
            margin-right: 1rem;
            width: 50px;
            text-align: center;
        }

        .role-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #ffffff;
        }

        .role-subtitle {
            font-size: 0.9rem;
            color: #b3e5fc;
            margin-top: 0.3rem;
        }

        .role-description {
            color: #e1f5fe;
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .data-sources {
            margin-bottom: 1.5rem;
        }

        .data-sources h4 {
            color: #4fc3f7;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-source {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            color: #b3e5fc;
        }

        .data-source i {
            color: #4fc3f7;
            width: 16px;
            margin-right: 0.5rem;
        }

        .analyze-btn {
            width: 100%;
            padding: 12px 0;
            background: linear-gradient(45deg, #4fc3f7, #29b6f6);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        .analyze-btn:hover {
            background: linear-gradient(45deg, #29b6f6, #0288d1);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 195, 247, 0.4);
        }

        .analyze-btn:disabled {
            background: #555;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .results-section {
            margin-top: 3rem;
            padding: 2rem;
            background: linear-gradient(145deg, #1a1a2e, #2d2d44);
            border-radius: 15px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            min-height: 400px;
        }

        .results-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid rgba(79, 195, 247, 0.3);
        }

        .results-header-left {
            display: flex;
            align-items: center;
        }

        .results-header i {
            font-size: 1.5rem;
            color: #4fc3f7;
            margin-right: 1rem;
        }

        .results-header h2 {
            font-size: 1.8rem;
            color: #ffffff;
        }

        .last-updated {
            font-size: 0.9rem;
            color: #b3e5fc;
            opacity: 0.8;
        }

        .loading {
            text-align: center;
            padding: 3rem;
            color: #b3e5fc;
        }

        .loading i {
            font-size: 3rem;
            color: #4fc3f7;
            animation: spin 2s linear infinite;
            margin-bottom: 1rem;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .result-card {
            background: rgba(45, 45, 68, 0.5);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 4px solid #4fc3f7;
        }

        .result-title {
            color: #4fc3f7;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .metric {
            background: rgba(79, 195, 247, 0.1);
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
        }

        .metric-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #4fc3f7;
        }

        .metric-label {
            font-size: 0.8rem;
            color: #b3e5fc;
            margin-top: 0.3rem;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 0.5rem;
        }

        .status-active { background-color: #4caf50; }
        .status-warning { background-color: #ff9800; }
        .status-error { background-color: #f44336; }

        .api-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(45, 45, 68, 0.95);
            padding: 1rem;
            border-radius: 10px;
            border: 1px solid rgba(79, 195, 247, 0.3);
            z-index: 1000;
        }

        .api-status h4 {
            color: #4fc3f7;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }

        .api-item {
            display: flex;
            align-items: center;
            font-size: 0.8rem;
            color: #b3e5fc;
            margin-bottom: 0.3rem;
        }

        .error-message {
            background: rgba(244, 67, 54, 0.1);
            border: 1px solid rgba(244, 67, 54, 0.3);
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #ffcdd2;
        }

        .footer {
            text-align: center;
            padding: 3rem 2rem;
            color: #b3e5fc;
            font-size: 0.9rem;
        }

        .footer a {
            color: #4fc3f7;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 768px) {
            .dashboard-header h1 {
                font-size: 2rem;
            }
            
            .main-container {
                padding: 1rem;
            }
            
            .roles-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
            
            .role-card {
                padding: 1.5rem;
            }
            
            .api-status {
                position: relative;
                top: auto;
                right: auto;
                margin-bottom: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- API Status Indicator -->
    <div class="api-status">
        <h4><i class="fas fa-satellite-dish"></i> Live API Status</h4>
        <div class="api-item" id="server-status">
            <span class="status-indicator status-warning"></span>
            Server: Connecting...
        </div>
        <div class="api-item" id="coingecko-status">
            <span class="status-indicator status-active"></span>
            CoinGecko Pro
        </div>
        <div class="api-item" id="defillama-status">
            <span class="status-indicator status-active"></span>
            DefiLlama
        </div>
        <div class="api-item" id="velo-status">
            <span class="status-indicator status-warning"></span>
            Velo Data
        </div>
    </div>

    <!-- Dashboard Header -->
    <div class="dashboard-header">
        <h1><i class="fas fa-chart-line"></i> SuperClaude Crypto Analysis Suite</h1>
        <p class="subtitle">
            Professional-grade crypto analysis with live API integration • Real-time risk management & opportunity discovery
            <span class="live-indicator">
                <span class="live-dot"></span>
                LIVE
            </span>
        </p>
    </div>

    <div class="main-container">
        <!-- Roles Grid -->
        <div class="roles-grid">
            <!-- Risk Manager & Macro PM -->
            <div class="role-card">
                <div class="role-header">
                    <div class="role-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <div>
                        <div class="role-title">Risk Manager & Macro PM</div>
                        <div class="role-subtitle">Daily risk regime scoring + allocation</div>
                    </div>
                </div>
                <div class="role-description">
                    Build a daily "risk regime score" (0–100) and tactical allocation plan (BTC/ETH/Alts/Cash %) with 1-3 day trading recommendations based on comprehensive market analysis.
                </div>
                <div class="data-sources">
                    <h4><i class="fas fa-database"></i> Live Data Sources</h4>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        CoinGecko: Global metrics, dominance, volume, breadth
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        DefiLlama: TVL momentum, stablecoins, yields
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        Velo: Futures/spot flow, funding, OI analysis
                    </div>
                </div>
                <button class="analyze-btn" onclick="runLiveAnalysis('risk-analysis')">
                    <i class="fas fa-play"></i> Generate Live Risk Report
                </button>
            </div>

            <!-- Quant Sector Scout -->
            <div class="role-card">
                <div class="role-header">
                    <div class="role-icon">
                        <i class="fas fa-search"></i>
                    </div>
                    <div>
                        <div class="role-title">Quant Sector Scout</div>
                        <div class="role-subtitle">Live sector rotation detection</div>
                    </div>
                </div>
                <div class="role-description">
                    Identify 3-5 sectors primed for outperformance in the next 7-21 days with top 5-15 tickers per sector, including entry zones and invalidation levels.
                </div>
                <div class="data-sources">
                    <h4><i class="fas fa-database"></i> Live Data Sources</h4>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        CoinGecko: Categories ROI, volume, trending pools
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        DefiLlama: TVL velocity by sector/protocol
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        Velo: OI, funding, taker flow validation
                    </div>
                </div>
                <button class="analyze-btn" onclick="runLiveAnalysis('sector-scout')">
                    <i class="fas fa-play"></i> Scout Sectors Live
                </button>
            </div>

            <!-- Tactical Dip-Buyer -->
            <div class="role-card">
                <div class="role-header">
                    <div class="role-icon">
                        <i class="fas fa-arrow-down"></i>
                    </div>
                    <div>
                        <div class="role-title">Tactical Dip-Buyer</div>
                        <div class="role-subtitle">Live leverage reset detection</div>
                    </div>
                </div>
                <div class="role-description">
                    Detect pairs where leverage has meaningfully reset while spot demand stabilizes. Generate laddered bids and time-based scaling plans.
                </div>
                <div class="data-sources">
                    <h4><i class="fas fa-database"></i> Live Data Sources</h4>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        CoinGecko: OHLC, volume charts, derivatives data
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        DefiLlama: TVL drawdown vs price analysis
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        Velo: OI reset, funding flip, taker imbalance
                    </div>
                </div>
                <button class="analyze-btn" onclick="runLiveAnalysis('dip-buyer')">
                    <i class="fas fa-play"></i> Find Live Dip Setups
                </button>
            </div>

            <!-- Yield PM -->
            <div class="role-card">
                <div class="role-header">
                    <div class="role-icon">
                        <i class="fas fa-percentage"></i>
                    </div>
                    <div>
                        <div class="role-title">Yield PM</div>
                        <div class="role-subtitle">Live DeFi yield optimization</div>
                    </div>
                </div>
                <div class="role-description">
                    Rank top DeFi opportunities where net APY is attractive after protocol liquidity, token concentration, and market beta risk adjustments.
                </div>
                <div class="data-sources">
                    <h4><i class="fas fa-database"></i> Live Data Sources</h4>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        DefiLlama: Yields universe, TVL trends, APY variance
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        CoinGecko: Token liquidity, category beta, drawdowns
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        Velo: Flow analysis for exit risk assessment
                    </div>
                </div>
                <button class="analyze-btn" onclick="runLiveAnalysis('yield-analysis')">
                    <i class="fas fa-play"></i> Optimize Yields Live
                </button>
            </div>

            <!-- Five-Minute Altcoin Check -->
            <div class="role-card">
                <div class="role-header">
                    <div class="role-icon">
                        <i class="fas fa-rocket"></i>
                    </div>
                    <div>
                        <div class="role-title">5-Min Altcoin Strength</div>
                        <div class="role-subtitle">Live ETH outperformers</div>
                    </div>
                </div>
                <div class="role-description">
                    Real-time check: List 5 altcoins that beat ETH's weekly return today. Each coin gets a one-sentence catalyst and live price chart link.
                </div>
                <div class="data-sources">
                    <h4><i class="fas fa-database"></i> Live Data Sources</h4>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        CoinGecko: Real-time returns, market performance
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        Live price comparison vs ETH
                    </div>
                </div>
                <button class="analyze-btn" onclick="runLiveAnalysis('altcoin-strength')">
                    <i class="fas fa-play"></i> Live Strength Check
                </button>
            </div>

            <!-- Gem Deep Dive -->
            <div class="role-card">
                <div class="role-header">
                    <div class="role-icon">
                        <i class="fas fa-gem"></i>
                    </div>
                    <div>
                        <div class="role-title">Gem Deep Dive</div>
                        <div class="role-subtitle">Live micro-cap analysis</div>
                    </div>
                </div>
                <div class="role-description">
                    Select one micro-cap below $30M with rising on-chain volume. Live fundamental report: team, product, tokenomics, runway, and red flags.
                </div>
                <div class="data-sources">
                    <h4><i class="fas fa-database"></i> Live Data Sources</h4>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        CoinGecko: Live market cap, volume, on-chain metrics
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        DefiLlama: Protocol analysis, TVL trends
                    </div>
                    <div class="data-source">
                        <i class="fas fa-circle"></i>
                        Real-time team research, tokenomics analysis
                    </div>
                </div>
                <button class="analyze-btn" onclick="runLiveAnalysis('gem-analysis')">
                    <i class="fas fa-play"></i> Live Deep Dive
                </button>
            </div>
        </div>

        <!-- Results Section -->
        <div class="results-section" id="results-section">
            <div class="results-header">
                <div class="results-header-left">
                    <i class="fas fa-chart-bar"></i>
                    <h2>Live Analysis Results</h2>
                </div>
                <div class="last-updated" id="last-updated">
                    Ready for live analysis
                </div>
            </div>
            <div id="results-content">
                <div class="loading">
                    <i class="fas fa-satellite-dish"></i>
                    <p>Connected to live data feeds</p>
                    <p style="font-size: 0.9rem; margin-top: 1rem; opacity: 0.7;">
                        Select an analysis module above to view real-time results
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>
            <strong>SuperClaude Crypto Analysis Suite - Live Version</strong> • 
            Powered by <a href="https://github.com/SuperClaude-Org/SuperClaude_Framework" target="_blank">SuperClaude Framework v3.0.0</a>
        </p>
        <p style="margin-top: 0.5rem; font-size: 0.8rem; opacity: 0.7;">
            Live API Integration: CoinGecko Pro • DefiLlama • Velo Data • 
            Real-time crypto risk management and opportunity discovery
        </p>
    </div>

    <script>
        // Configuration
        const API_BASE = 'http://localhost:8080/api';
        let serverOnline = false;
        
        // Check server status
        async function checkServerStatus() {
            try {
                const response = await fetch(`${API_BASE}/status`);
                const data = await response.json();
                
                if (response.ok) {
                    serverOnline = true;
                    updateServerStatus('active', 'Server: Online');
                    updateAPIStatus(data.services);
                } else {
                    throw new Error('Server offline');
                }
            } catch (error) {
                serverOnline = false;
                updateServerStatus('error', 'Server: Offline');
                console.error('Server status check failed:', error);
            }
        }
        
        function updateServerStatus(status, text) {
            const element = document.getElementById('server-status');
            const indicator = element.querySelector('.status-indicator');
            
            indicator.className = `status-indicator status-${status}`;
            element.innerHTML = `<span class="status-indicator status-${status}"></span>${text}`;
        }
        
        function updateAPIStatus(services) {
            // Update individual service status based on server response
            if (services) {
                Object.keys(services).forEach(service => {
                    const status = services[service] === 'active' ? 'active' : 'warning';
                    // Update UI accordingly
                });
            }
        }
        
        function showLoading() {
            document.getElementById('results-content').innerHTML = `
                <div class="loading">
                    <i class="fas fa-spinner"></i>
                    <p>Fetching live market data...</p>
                    <p style="font-size: 0.9rem; margin-top: 1rem;">
                        Connecting to CoinGecko Pro, DefiLlama, and Velo Data APIs
                    </p>
                </div>
            `;
        }
        
        function showError(message) {
            document.getElementById('results-content').innerHTML = `
                <div class="error-message">
                    <h4><i class="fas fa-exclamation-triangle"></i> Connection Error</h4>
                    <p>${message}</p>
                    <p style="margin-top: 1rem; font-size: 0.9rem;">
                        Make sure the server is running: <code>python crypto_server.py</code>
                    </p>
                </div>
            `;
        }
        
        async function runLiveAnalysis(endpoint) {
            if (!serverOnline) {
                showError('Server is offline. Please start the server first.');
                return;
            }
            
            showLoading();
            
            // Disable all buttons during analysis
            document.querySelectorAll('.analyze-btn').forEach(btn => {
                btn.disabled = true;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Analyzing...';
            });
            
            try {
                const response = await fetch(`${API_BASE}/${endpoint}`);
                const data = await response.json();
                
                if (response.ok) {
                    displayResults(endpoint, data);
                    updateLastUpdated();
                } else {
                    throw new Error(data.error || 'Analysis failed');
                }
            } catch (error) {
                showError(`Failed to fetch ${endpoint} data: ${error.message}`);
            } finally {
                // Re-enable all buttons
                document.querySelectorAll('.analyze-btn').forEach((btn, index) => {
                    btn.disabled = false;
                    const labels = [
                        'Generate Live Risk Report',
                        'Scout Sectors Live', 
                        'Find Live Dip Setups',
                        'Optimize Yields Live',
                        'Live Strength Check',
                        'Live Deep Dive'
                    ];
                    btn.innerHTML = `<i class="fas fa-play"></i> ${labels[index]}`;
                });
            }
        }
        
        function displayResults(endpoint, data) {
            const resultsContent = document.getElementById('results-content');
            let html = '';
            
            switch(endpoint) {
                case 'risk-analysis':
                    html = generateRiskAnalysisHTML(data);
                    break;
                case 'sector-scout':
                    html = generateSectorScoutHTML(data);
                    break;
                case 'dip-buyer':
                    html = generateDipBuyerHTML(data);
                    break;
                case 'yield-analysis':
                    html = generateYieldAnalysisHTML(data);
                    break;
                case 'altcoin-strength':
                    html = generateAltcoinStrengthHTML(data);
                    break;
                case 'gem-analysis':
                    html = generateGemAnalysisHTML(data);
                    break;
                default:
                    html = '<div class="result-card"><p>Unknown analysis type</p></div>';
            }
            
            resultsContent.innerHTML = html;
        }
        
        function generateRiskAnalysisHTML(data) {
            return `
                <div class="result-card">
                    <div class="result-title">
                        <i class="fas fa-shield-alt"></i> Live Risk Regime Analysis
                    </div>
                    <div class="metric-grid">
                        <div class="metric">
                            <div class="metric-value">${data.composite_risk_score}</div>
                            <div class="metric-label">Composite Risk Score</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.regime}</div>
                            <div class="metric-label">Market Regime</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.components.market_breadth}</div>
                            <div class="metric-label">Market Breadth</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.components.defi_momentum}</div>
                            <div class="metric-label">DeFi Momentum</div>
                        </div>
                    </div>
                    <h4 style="color: #4fc3f7; margin: 1.5rem 0 1rem 0;">Live Tactical Allocation</h4>
                    <div class="metric-grid">
                        <div class="metric">
                            <div class="metric-value">${data.allocation.BTC}%</div>
                            <div class="metric-label">Bitcoin (BTC)</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.allocation.ETH}%</div>
                            <div class="metric-label">Ethereum (ETH)</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.allocation.Top_Alts}%</div>
                            <div class="metric-label">Top Altcoins</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.allocation.Cash}%</div>
                            <div class="metric-label">Cash/Stables</div>
                        </div>
                    </div>
                    <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(79, 195, 247, 0.1); border-radius: 8px;">
                        <strong style="color: #4fc3f7;">Key Recommendation:</strong>
                        <p style="margin-top: 0.5rem; color: #e1f5fe;">${data.key_recommendation}</p>
                    </div>
                </div>
            `;
        }
        
        function generateSectorScoutHTML(data) {
            let html = '<div class="result-card"><div class="result-title"><i class="fas fa-search"></i> Live Sector Opportunities</div>';
            
            data.top_sectors.forEach(sector => {
                html += `
                    <div style="margin-bottom: 2rem;">
                        <h4 style="color: #4fc3f7; margin-bottom: 1rem;">
                            ${sector.sector} • ${sector.momentum} • Score: ${sector.score}
                        </h4>
                        <p style="color: #b3e5fc; margin-bottom: 1rem; font-style: italic;">${sector.thesis}</p>
                        <div class="metric-grid">
                `;
                
                sector.top_picks.forEach(pick => {
                    html += `
                        <div class="metric">
                            <div class="metric-value">${pick.symbol}</div>
                            <div class="metric-label">${pick.name}</div>
                            <div style="font-size: 0.8rem; margin-top: 0.3rem; color: #4fc3f7;">
                                ${pick.change_7d > 0 ? '+' : ''}${pick.change_7d.toFixed(1)}%
                            </div>
                            <div style="font-size: 0.7rem; color: #b3e5fc;">
                                Entry: $${pick.entry}
                            </div>
                        </div>
                    `;
                });
                
                html += '</div></div>';
            });
            
            html += '</div>';
            return html;
        }
        
        function generateDipBuyerHTML(data) {
            let html = '<div class="result-card"><div class="result-title"><i class="fas fa-arrow-down"></i> Live Dip-Buying Opportunities</div>';
            
            data.dip_opportunities.forEach(opportunity => {
                html += `
                    <div style="margin-bottom: 2rem; padding: 1rem; background: rgba(79, 195, 247, 0.05); border-radius: 8px;">
                        <h4 style="color: #4fc3f7; margin-bottom: 1rem;">${opportunity.symbol} - ${opportunity.asset}</h4>
                        <div class="metric-grid">
                            <div class="metric">
                                <div class="metric-value">${opportunity.reset_score}</div>
                                <div class="metric-label">Reset Score</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value">$${opportunity.current_price}</div>
                                <div class="metric-label">Current Price</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value">${opportunity.change_7d}%</div>
                                <div class="metric-label">7D Change</div>
                            </div>
                        </div>
                        <h5 style="color: #4fc3f7; margin: 1rem 0 0.5rem 0;">Entry Plan:</h5>
                        <div class="metric-grid">
                            ${opportunity.entry_plan.map(level => `
                                <div class="metric">
                                    <div class="metric-value">Level ${level.level}</div>
                                    <div class="metric-label">$${level.entry_price} • ${level.size_percentage}%</div>
                                    <div style="font-size: 0.7rem; color: #b3e5fc; margin-top: 0.3rem;">
                                        ${level.distance_from_current}
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                        <p style="color: #e1f5fe; margin-top: 1rem; font-style: italic;">${opportunity.thesis}</p>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }
        
        function generateYieldAnalysisHTML(data) {
            let html = '<div class="result-card"><div class="result-title"><i class="fas fa-percentage"></i> Live Yield Opportunities</div>';
            
            data.top_opportunities.forEach(opportunity => {
                html += `
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(79, 195, 247, 0.05); border-radius: 8px;">
                        <h4 style="color: #4fc3f7; margin-bottom: 0.5rem;">
                            ${opportunity.project} on ${opportunity.chain}
                        </h4>
                        <div class="metric-grid">
                            <div class="metric">
                                <div class="metric-value">${opportunity.base_apy}%</div>
                                <div class="metric-label">Base APY</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value">${opportunity.sustainable_yield_score}</div>
                                <div class="metric-label">Risk-Adj Score</div>
                            </div>
                            <div class="metric">
                                <div class="metric-value">$${(opportunity.tvl_usd/1000000).toFixed(1)}M</div>
                                <div class="metric-label">TVL</div>
                            </div>
                        </div>
                        <p style="color: #b3e5fc; font-size: 0.9rem; margin-top: 0.5rem;">
                            <strong>Sizing:</strong> ${opportunity.sizing_guidance}
                        </p>
                        ${opportunity.red_flags.length > 0 ? `
                            <div style="margin-top: 0.5rem; color: #ffab91; font-size: 0.8rem;">
                                <strong>Red Flags:</strong> ${opportunity.red_flags.join(', ')}
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }
        
        function generateAltcoinStrengthHTML(data) {
            let html = '<div class="result-card"><div class="result-title"><i class="fas fa-rocket"></i> Live ETH Outperformers</div>';
            html += `<p style="color: #b3e5fc; margin-bottom: 1.5rem;">ETH 7D Performance: <strong style="color: #4fc3f7;">${data.eth_7d_performance > 0 ? '+' : ''}${data.eth_7d_performance}%</strong></p>`;
            
            data.outperformers.forEach(coin => {
                html += `
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: rgba(79, 195, 247, 0.05); border-radius: 8px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <h4 style="color: #4fc3f7;">${coin.symbol} - ${coin.name}</h4>
                            <div style="text-align: right;">
                                <div style="color: #4caf50; font-weight: 600;">${coin.weekly_return}</div>
                                <div style="color: #b3e5fc; font-size: 0.8rem;">${coin.vs_eth_outperformance} vs ETH</div>
                                <div style="color: #90caf9; font-size: 0.7rem;">${coin.market_cap}</div>
                            </div>
                        </div>
                        <p style="color: #e1f5fe; line-height: 1.5; margin-bottom: 0.5rem;">
                            ${coin.catalyst}
                        </p>
                        <a href="${coin.price_chart}" target="_blank" style="color: #4fc3f7; text-decoration: none; font-size: 0.9rem;">
                            <i class="fas fa-external-link-alt"></i> Live Price Chart
                        </a>
                    </div>
                `;
            });
            
            html += '</div>';
            return html;
        }
        
        function generateGemAnalysisHTML(data) {
            return `
                <div class="result-card">
                    <div class="result-title">
                        <i class="fas fa-gem"></i> Live Micro-Cap Deep Dive: ${data.name} (${data.symbol})
                    </div>
                    <div class="metric-grid">
                        <div class="metric">
                            <div class="metric-value">${data.market_cap}</div>
                            <div class="metric-label">Market Cap</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">$${data.current_price}</div>
                            <div class="metric-label">Current Price</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.weekly_volume_change}</div>
                            <div class="metric-label">Volume Growth</div>
                        </div>
                    </div>
                    
                    <h4 style="color: #4fc3f7; margin: 1.5rem 0 1rem 0;">Live On-Chain Metrics</h4>
                    <div class="metric-grid">
                        <div class="metric">
                            <div class="metric-value">${data.on_chain_metrics.active_addresses}</div>
                            <div class="metric-label">Active Addresses</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.on_chain_metrics.transaction_volume}</div>
                            <div class="metric-label">Transaction Volume</div>
                        </div>
                        <div class="metric">
                            <div class="metric-value">${data.on_chain_metrics.unique_transactions}</div>
                            <div class="metric-label">Unique Transactions</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <h4 style="color: #4fc3f7; margin-bottom: 1rem;">Fundamental Analysis</h4>
                        
                        <div style="margin-bottom: 1rem;">
                            <strong style="color: #4fc3f7;">Team:</strong>
                            <p style="color: #e1f5fe; margin-top: 0.3rem;">${data.fundamental_analysis.team}</p>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <strong style="color: #4fc3f7;">Product:</strong>
                            <p style="color: #e1f5fe; margin-top: 0.3rem;">${data.fundamental_analysis.product}</p>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <strong style="color: #4fc3f7;">Tokenomics:</strong>
                            <p style="color: #e1f5fe; margin-top: 0.3rem;">${data.fundamental_analysis.tokenomics}</p>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <strong style="color: #4fc3f7;">Runway:</strong>
                            <p style="color: #e1f5fe; margin-top: 0.3rem;">${data.fundamental_analysis.runway}</p>
                        </div>
                        
                        <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(244, 67, 54, 0.1); border-radius: 8px; border-left: 4px solid #f44336;">
                            <h4 style="color: #f44336; margin-bottom: 1rem;"><i class="fas fa-exclamation-triangle"></i> Red Flags</h4>
                            ${data.red_flags.map(flag => `
                                <div style="color: #ffcdd2; margin-bottom: 0.5rem; font-size: 0.9rem;">
                                    <i class="fas fa-warning" style="margin-right: 0.5rem;"></i>${flag}
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="margin-top: 1.5rem; padding: 1rem; background: rgba(79, 195, 247, 0.1); border-radius: 8px;">
                            <strong style="color: #4fc3f7;">Investment Thesis:</strong>
                            <p style="margin-top: 0.5rem; color: #e1f5fe;">${data.investment_thesis}</p>
                            <p style="margin-top: 0.5rem; color: #b3e5fc; font-size: 0.9rem;">
                                <strong>Risk Rating:</strong> ${data.risk_rating}<br>
                                <strong>Recommended Allocation:</strong> ${data.recommended_allocation}
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }
        
        function updateLastUpdated() {
            const now = new Date();
            document.getElementById('last-updated').textContent = 
                `Last updated: ${now.toLocaleTimeString()}`;
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            console.log('SuperClaude Crypto Analysis Suite - Live Version loaded');
            checkServerStatus();
            
            // Check server status every 30 seconds
            setInterval(checkServerStatus, 30000);
        });
    </script>
</body>
</html>